/* Monaco Dark+ look for Pygments (.codehilite) */
pre {
    line-height: 125%;
}

/* Line numbers */
td.linenos .normal,
span.linenos {
    color: #858585;
    background: transparent;
}

td.linenos .special,
span.linenos.special {
    color: #ffffff;
    background-color: #4b5632;
}

/* Code block base */
.codehilite {
    /* Override Monaco Dark+ default to match rest of theme */
    background: #0a0f18;
    color: #d4d4d4;
    border-radius: 8px;
    border: 1px solid var(--border);
    display: block;
    overflow: hidden;
    /* clips children to rounded corners */
}

.codehilite .hll {
    background-color: #264f78;
}

/* highlighted line */

/* Comments */
.codehilite .c,
.codehilite .ch,
.codehilite .cm,
.codehilite .c1,
.codehilite .cs,
.codehilite .cpf {
    color: #6a9955;
    font-style: italic;
}

/* Errors / diagnostics */
.codehilite .err {
    color: #f44747;
    background: transparent;
    border: 1px solid #f44747;
}

.codehilite .gr,
.codehilite .gt,
.codehilite .gd {
    color: #f44747;
}

.codehilite .gi {
    color: #b5cea8;
}

/* Keywords */
.codehilite .k,
.codehilite .kc,
.codehilite .kd,
.codehilite .kn,
.codehilite .kp,
.codehilite .kr {
    color: #569cd6;
    /* blue */
    font-weight: normal;
}

/* Operator & punctuation */
.codehilite .o {
    color: #d4d4d4;
}

.codehilite .ow {
    color: #569cd6;
}

/* operator.word same as keyword */
.codehilite .p {
    color: #c586c0;
}

/* punctuation -> purple */

/* Numbers */
.codehilite .m,
.codehilite .mb,
.codehilite .mf,
.codehilite .mh,
.codehilite .mi,
.codehilite .mo,
.codehilite .il {
    color: #b5cea8;
}

/* Strings */
.codehilite .s,
.codehilite .sb,
.codehilite .sc,
.codehilite .dl,
.codehilite .sd,
.codehilite .s1,
.codehilite .sh {
    color: #ce9178;
}

/* orange */
.codehilite .s2 {
    color: #ce9178;
}

/* double-quoted string */
.codehilite .sa {
    color: #569cd6;
}

/* string affix -> blue */
.codehilite .si {
    color: #569cd6;
}

/* string interpolation -> blue */
.codehilite .se,
.codehilite .ss {
    color: #d7ba7d;
}

/* escapes/symbols */
.codehilite .sr {
    color: #d16969;
}

/* regex */

/* Names */
.codehilite .n {
    color: #d4d4d4;
}

/* base name -> white */
.codehilite .na {
    color: #9cdcfe;
}

/* attribute */
.codehilite .nb {
    color: #4ec9b0;
}

/* builtin -> green */
.codehilite .bp {
    color: #4ec9b0;
}

/* builtin pseudo -> green */
.codehilite .nc {
    color: #4ec9b0;
    font-weight: bold;
}

/* class */
.codehilite .nn {
    color: #4ec9b0;
    font-weight: bold;
}

/* namespace */
.codehilite .no {
    color: #4fc1ff;
}

/* constant */
.codehilite .nd {
    color: #c586c0;
}

/* decorator */
.codehilite .ne {
    color: #4ec9b0;
}

/* exception -> green */
.codehilite .nf,
.codehilite .fm {
    color: #dcdcaa;
}

/* function / magic func */
.codehilite .nv,
.codehilite .vc,
.codehilite .vg,
.codehilite .vi,
.codehilite .vm {
    color: #9cdcfe;
}

/* variables */
.codehilite .nx {
    color: #9cdcfe;
}

/* other names -> light blue */
.codehilite .nt {
    color: #569cd6;
}

/* tag name */

/* Generics / misc */
.codehilite .gh,
.codehilite .gp,
.codehilite .gu {
    color: #d4d4d4;
    font-weight: bold;
}

.codehilite .gs {
    font-weight: bold;
}

.codehilite .ge {
    font-style: italic;
}

.codehilite .go {
    color: #808080;
}

.codehilite .w {
    color: #d4d4d4;
    opacity: 0.3;
}

/* Optional: selection inside code */
.codehilite ::selection {
    background: #264f78;
    color: inherit;
}

/* --- Alignment fixes for Pygments table layout --- */
.codehilite,
.codehilite pre,
.codehilite code,
.codehilite .linenodiv pre {
    font: 13px/1.5 ui-monospace, SFMono-Regular, Menlo, Monaco, Consolas,
        "Liberation Mono", "Courier New", monospace;
}

/* Ensure we never wrap inside highlighted blocks (overrides #preview pre) */
.codehilite pre,
.codehilite code,
.codehilite .linenodiv pre {
    white-space: pre;
    word-break: normal;
    overflow-wrap: normal;
}

.codehilite pre,
.codehilite .linenodiv pre {
    margin: 0;
}

/* Table layout */
.codehilitetable {
    width: 100%;
    max-width: 100%;
    border-spacing: 0;
    table-layout: auto;
    /* allow dynamic sizing */
}

.codehilitetable td {
    vertical-align: top;
}

/* Gutter (line numbers) — auto-size to digits, never scroll */
.codehilitetable td.linenos {
    width: 1%;
    /* minimal-width hint */
    min-width: max-content;
    /* expand to fit widest number */
    white-space: nowrap;
    text-align: right;
    user-select: none;
    background: transparent;
    border-right: none;
    overflow: hidden;
    font-variant-numeric: tabular-nums;
    border-right: 1px solid var(--border);
}

.codehilitetable td.linenos pre {
    margin: 0;
    white-space: pre;
    overflow: hidden;
}

/* Code column — may shrink below content to allow inner scroll */
.codehilitetable td.code {
    width: 100%;
    /* take remaining space */
    min-width: 0;
    /* allow shrinking below min-content */
    padding-right: 0.8rem;
}

.codehilitetable td.code pre {
    margin: 0;
}

/* Horizontal scroll inside code cell (line numbers stay fixed) */
.codehilitetable td.code>div {
    display: block;
    width: 100%;
    max-width: 100%;
    overflow-x: auto;
    overflow-y: hidden;

    /* prevent the pre's intrinsic width from affecting column sizing */
    contain: inline-size;

    /* match theme scrollbars */
    scrollbar-width: thin;
    /* Firefox */
    scrollbar-color: var(--accent-weak) transparent;
}

.codehilitetable td.code>div::-webkit-scrollbar {
    height: 8px;
}

.codehilitetable td.code>div::-webkit-scrollbar-track {
    background: transparent;
}

.codehilitetable td.code>div::-webkit-scrollbar-thumb {
    background: var(--accent-weak);
    border-radius: 999px;
    border: 2px solid transparent;
    background-clip: padding-box;
}

.codehilitetable td.code>div:hover::-webkit-scrollbar-thumb {
    background: var(--accent);
}

.codehilitetable td.code>div::-webkit-scrollbar-corner {
    background: transparent;
}

.codehilitetable td.code>div::-webkit-scrollbar-button {
    width: 0;
    height: 0;
    display: none;
}